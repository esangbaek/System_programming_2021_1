INLOOP	JSUB	STKINIT
	TD	INDEV
	JEQ	INLOOP
	RD	INDEV
	SUB	#48
	STA	LENGTH
	RD	INDEV

GETCH	TD	INDEV
	JEQ	GETCH
	RD	INDEV
	SUB	#48
	COMP	ZERO
	JEQ	POP
	JGT	PUSH
CONT	RD	INDEV
	TIX	LENGTH
	JLT	GETCH

PRINT	J	GETRST
	TD	OUTDEV
	JEQ	PRINT
RST	LDA	RESULT
	DIV	TEN
	COMP	ZERO
	JEQ	ONE
	ADD	#48
	WD	OUTDEV
ONE	LDA	RESULT
	DIV	TEN
	MUL	TEN
	STA	TEMP
	LDA	RESULT
	SUB	TEMP
	ADD	#48
	WD	OUTDEV
	J	FINAL

STKINIT	LDA	#STACK
	STA	TOP
	STA	FLOOR
	RSUB

GETRST	LDA	@FLOOR	.GET SUM OF STACKS
	COMP	ZERO
	JEQ	RST
	ADD	RESULT
	STA	RESULT
	LDA	FLOOR
	ADD	#3
	STA	FLOOR
	J	GETRST

PUSH	STA	@TOP
	LDA	TOP
	ADD	#3
	STA	TOP
	J	CONT

POP	LDA	TOP
	SUB	#3
	STA	TOP
	LDA	#0
	STA	@TOP
	J	CONT

FINAL	TIX	LENGTH

INDEV	BYTE	0
OUTDEV	BYTE	1
STACK	RESW	10
TOP	RESW	1
FLOOR	RESW	1
LENGTH	RESW	1
ZERO	WORD	0
TEN	WORD	10
RESULT	WORD	0
TEMP	WORD	0